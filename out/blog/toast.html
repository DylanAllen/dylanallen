<!DOCTYPE html><html lang="en-US"><head><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="preconnect" href="https://firebasestorage.googleapis.com"/><link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;1,100;1,300;1,500&amp;family=Source+Code+Pro:ital,wght@0,300;0,400;0,600;1,300;1,400;1,600&amp;display=swap" rel="stylesheet"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-47948601-1"></script><link rel="dns-prefetch" href="https://firebasestorage.googleapis.com"/><script>
                    window.dataLayer = window.dataLayer || [];
                    window.ga_id = 'UA-47948601-1';
                    function gtag(){dataLayer.push(arguments);}
                    gtag('js', new Date());
                    gtag('config', 'UA-47948601-1');
                </script><title>React Toast Component | Dylan Allen | JavaScript Developer | Frontend Web</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="description" content="I love toast notifications. Simple, unobtrusive, and useful. In this post I am going to show you how to create a simple toast component and implement it with React Hooks."/><meta property="og:image" content="https://www.dylanallen.net/toast.jpg"/><meta property="twitter:image" content="https://www.dylanallen.net/toast.jpg"/><meta property="og:title" content="React Toast Component | Dylan Allen | JavaScript Developer | Frontend Web"/><meta property="og:description" content="I love toast notifications. Simple, unobtrusive, and useful. In this post I am going to show you how to create a simple toast component and implement it with React Hooks."/><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/77463a377a39bf6de8ea.css" as="style"/><link rel="stylesheet" href="/_next/static/css/77463a377a39bf6de8ea.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-245f049e565ebf942e09.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.4b81eedf2fcdb09bf521.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.4d2961221cae5838b6ac.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-55ed807e3b5db3e25777.js" as="script"/><link rel="preload" href="/_next/static/chunks/ff239f9d.249dcdd128198702df19.js" as="script"/><link rel="preload" href="/_next/static/chunks/7c590f24b34f76726c3a37b9c8c63e8f02ff2014.e0b6a729fc787d22f69b.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-7731033f3eeb159187f9.js" as="script"/><link rel="preload" href="/_next/static/chunks/1f07849e.a376b013561c579bf5b7.js" as="script"/><link rel="preload" href="/_next/static/chunks/6f848d5045b5eb13f5336e9a10231ebd151b0a80.ea2266aaa4deaa456c5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/224ca6d47e35d1bec8c7169f004a821de983723f.a0b9aad4892521f1b797.js" as="script"/><link rel="preload" href="/_next/static/chunks/b6e4c73abf3e02f232daeaa9aa9b92c33df71371.f8acc1975a17fb0ff48e.js" as="script"/><link rel="preload" href="/_next/static/chunks/b957e72bb6404296b47ef351bcffbdbcc35df5f4.15bbaddddde139b952de.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/toast-3f68802d6043a1ee464a.js" as="script"/></head><body><div id="__next"><div><main id="main"><header id="mainheader" class="container"><a href="/"><img alt="DA Logo" src="/da-purple.png" class="headerlogo" style="height:42.4px;width:40px"/></a><nav id="mainnav"><a href="/blog">Blog</a><a href="/resume">Resume</a><a href="/about">About</a><a href="/">Home</a></nav></header><div class="maincontainer"><div><div style="opacity:0"><div class="container"><h1>React Toast Component</h1><div class="image-container undefined " style="width:100%;height:45vw;max-height:700px"><div class="image-div" style="background-image:url();opacity:0"><figure><img src="" style="display:none"/></figure></div></div><p>I love toast notifications. Simple, unobtrusive, and useful. In this post I am going to show you how to create a simple toast component and implement it with React Hooks. If you just want to see the code, you can peruse the <a href="https://codesandbox.io/s/react-toast-component-8w9wz?file=/src/App.js:524-622">Code Sandbox</a>.</p><p>If you don&#x27;t know what I mean when I say &quot;toast notification&quot;, <a>click here</a> to see an example. It is a message that pops up at the bottom of the window like toast popping out of the toaster.</p><h2>The Toast Component</h2><p>I split this into two components. There is the Toast, which is the visual element that handles it&#x27;s fade in, fade out, and removal timing. That component is used inside a Toaster component (see what I did there) which handles the state of each toast message and supplies the function for removing a message to the Toast component. So lets dig in, here is the code for the toast component.</p><pre><code class="language-javascript">import React, { useEffect, useState } from &quot;react&quot;;

const ToastComponent = ({ message, id, status, kill }) =&gt; {
  const [show, setShow] = useState(false);

  useEffect(() =&gt; {
    if (message) {
      setTimeout(() =&gt; {
        setShow(true);
        setTimeout(() =&gt; {
          setShow(false);
          setTimeout(() =&gt; {
            kill({ key: id, message });
          }, 500);
        }, 5000);
      }, 100);
    }
  }, [message]);

  return (
    &lt;div
      className={`toastMessage ${show &amp;&amp; message ? &quot;show&quot; : &quot;hide&quot;} ${status}`}
    &gt;
      {message ? message : &quot;&quot;}
    &lt;/div&gt;
  );
};

export default ToastComponent;</code></pre><p>Pretty simple except for the unfortunately deep nesting of setTimeouts in the <code>useEffect</code> hook. I don&#x27;t like it, and there is probably a better way to do it, but this works. This nest allows the animations to be ahndled by CSS. We create the element, then update the class to present the message, wait 5 seconds, chage the class to trigger the fade out transition, then call the <code>kill</code> function that is provided by the Toaster parent component to remove the message from the DOM.</p><h2>The Toaster Component</h2><p>There is quite a bit more going on here to handle state for the messages and make sure that we can handle multiple messages fired at different times from different sources and stay consistent.</p><pre><code class="language-javascript">
import React, { useEffect, useReducer } from &quot;react&quot;;
import ToastComponent from &quot;./Toast&quot;;

const reducer = (state, action) =&gt; {
  switch (action.type) {
    case &quot;toast&quot;:
      return [...state, action.value];
    case &quot;kill&quot;:
      const index = state.findIndex((entry) =&gt; entry.key === action.value.key);
      const arr = [...state];
      arr.splice(index, 1);
      return arr;
    default:
      throw new Error();
  }
};

function Toaster({ toastInput }) {
  const initialState = [];
  const [state, dispatch] = useReducer(reducer, initialState);

  useEffect(() =&gt; {
    if (toastInput?.message) toast(toastInput);
  }, [toastInput]);

  const toast = ({ message, status }) =&gt; {
    dispatch({
      type: &quot;toast&quot;,
      value: {
        message: message,
        status: status ? status : &quot;success&quot;,
        key: Math.random().toString()
      }
    });
  };

  const killToast = ({ key, message }) =&gt; {
    dispatch({
      type: &quot;kill&quot;,
      value: {
        key: key,
        message: message
      }
    });
  };

  return (
    &lt;div className=&quot;toastContainer&quot;&gt;
      {state.map((toastEntry) =&gt; {
        return (
          &lt;ToastComponent
            key={toastEntry.key}
            id={toastEntry.key}
            message={toastEntry.message}
            status={toastEntry.status}
            kill={killToast}
          /&gt;
        );
      })}
    &lt;/div&gt;
  );
}

export default Toaster;</code></pre><h2>Style: CSS</h2><p>There isn&#x27;t a whole lot to the CSS. A simple transform rule gives us the pop up and drop down motion when the className is toggled.</p><pre><code class="language-css">
.App {
  font-family: sans-serif;
  text-align: center;
}

.toastContainer {
  position: fixed;
  display: flex;
  flex-direction: column-reverse;
  bottom: 0;
  text-align: center;
  pointer-events: none;
  z-index: 99;
  width: 100%;
}

.toastContainer .toastMessage {
  opacity: 0.9;
  display: inline-block;
  margin: 0 auto 20px;
  background-color: rgb(44, 97, 44);
  color: #ffffff;
  border-radius: 15px;
  box-shadow: 0 0 5px #000000;
  padding: 10px 40px;
  transition: all 0.5s ease-out;
  font-size: 17px;
}

.toastContainer .toastMessage.error {
  background-color: red;
}

.toastContainer .toastMessage.hide {
  opacity: 0;
  transform: translateY(15px);
}

</code></pre><h2>Implement the toast component</h2><p>This is the kind of component you need to be able to access from several different components. So it makes sense to pass the toast function to a Context provider at the root level. I wanted it to be as easy as possible to create a toast notification, so I created a function that handles the state updates, and then I pass that function to the context.</p><pre><code class="language-javascript">
import React, { useState, createContext } from &quot;react&quot;;
import Toaster from &quot;./Toast/Toaster&quot;;

export const ToastContext = createContext();

export default function App() {
  const [toastMessage, setMessage] = useState(&quot;&quot;);

  const toast = (message, status) =&gt; {
    setMessage({
      message: message,
      status: status ? status : undefined
    });
  };

  return (
    &lt;ToastContext.Provider value={{ toast }}&gt;
      &lt;div className=&quot;App&quot;&gt;
      { your app code here }
      &lt;/div&gt;
    &lt;/ToastContext.Provider&gt;
  );
}

</code></pre><h2>React Toast Component Summary</h2><p>If you need a feature rich component, then you will probably want to use an existing library like <a href="https://github.com/fkhadra/react-toastify">React Toastify</a>. But if you want to add a simple solution to your app without importing extra dependencies, this will do the trick. This is basically what I am using on this site, but my site is in TypeScript, so if you need a TS example, you can look through the code on my <a href="https://github.com/DylanAllen/dylanallen/blob/master/components/Toast.tsx">GitHub repo</a>.</p><p>You can see a working demo in this <a href="https://codesandbox.io/s/react-toast-component-8w9wz?file=/src/App.js:524-622">Code Sandbox</a></p><div class="commentsContainer"><h2 class="StyledHeading-sc-1rdh4aw-0 jpA-dhP">Comments</h2><div class="comments"><div></div></div><div class="no-comment">You must log in to leave a comment</div></div></div></div></div></div><footer class="container"><nav class="footernav"><a href="https://github.com/DylanAllen"><svg aria-label="Github" viewBox="0 0 24 24" class="StyledIcon-ofa7kd-0 MRrP"><path fill="#333" fill-rule="evenodd" d="M11.9989871,1 C5.92550416,1 1,5.92482888 1,12.0003376 C1,16.8603395 4.15153934,20.9829338 8.52263728,22.4374904 C9.0729918,22.5387827 9.27355045,22.199116 9.27355045,21.9073943 C9.27355045,21.6467356 9.2640965,20.954572 9.25869425,20.0368642 C6.19899322,20.7013414 5.55342398,18.5620492 5.55342398,18.5620492 C5.0530403,17.2911692 4.33183953,16.9528531 4.33183953,16.9528531 C3.33309801,16.2708186 4.40747107,16.2843243 4.40747107,16.2843243 C5.51155652,16.3619816 6.09229872,17.4181221 6.09229872,17.4181221 C7.07348292,19.0988981 8.66714755,18.6133706 9.2938089,18.3317781 C9.39375058,17.6213819 9.67804414,17.1365297 9.99205009,16.86169 C7.54955646,16.5841493 4.98146045,15.6401056 4.98146045,11.4249977 C4.98146045,10.224347 5.41026428,9.24181221 6.11390773,8.47334172 C6.00046042,8.19512569 5.62297799,7.07618404 6.22195279,5.56220265 C6.22195279,5.56220265 7.14506277,5.26642929 9.24653918,6.68992296 C10.12373,6.44547101 11.0650726,6.32392032 12.0003376,6.31919335 C12.9349274,6.32392032 13.8755947,6.44547101 14.7541361,6.68992296 C16.8542619,5.26642929 17.7760214,5.56220265 17.7760214,5.56220265 C18.3763467,7.07618404 17.9988643,8.19512569 17.8860923,8.47334172 C18.5910863,9.24181221 19.0165137,10.224347 19.0165137,11.4249977 C19.0165137,15.6509101 16.444366,16.5807729 13.9944443,16.8529114 C14.3888087,17.192578 14.7406305,17.863808 14.7406305,18.890236 C14.7406305,20.3603241 14.7271248,21.5467939 14.7271248,21.9073943 C14.7271248,22.2018171 14.9256576,22.5441849 15.4834403,22.4368151 C19.8511618,20.9788821 23,16.8589889 23,12.0003376 C23,5.92482888 18.0744958,1 11.9989871,1"></path></svg></a><a href="https://stackoverflow.com/story/dylanallen"><svg aria-label="StackOverflow" viewBox="0 0 24 24" class="StyledIcon-ofa7kd-0 MRrP"><path fill="#FE7A15" fill-rule="evenodd" d="M11.4137208,0.131625 C11.7902208,-0.043875 12.2252208,-0.043875 12.6017208,0.131625 L23.4227208,5.187375 C23.7467208,5.338875 23.7459708,5.800875 23.4204708,5.950875 L12.5154708,10.968375 C12.1929708,11.116875 11.8217208,11.116875 11.4992208,10.968375 L0.594970771,5.950875 C0.269470771,5.800875 0.267970771,5.338875 0.592720771,5.187375 L11.4137208,0.131625 Z M23.4227208,11.6582856 C23.7474708,11.8097856 23.7459708,12.2717856 23.4204708,12.4217856 L12.5162208,17.4392856 C12.1937208,17.5877856 11.8224708,17.5877856 11.4999708,17.4392856 L0.594970771,12.4217856 C0.269470771,12.2717856 0.267970771,11.8097856 0.592720771,11.6582856 L2.82772077,10.6142856 C3.15172077,10.4627856 3.52597077,10.4620356 3.85072077,10.6112856 L11.4999708,14.1302856 C11.8224708,14.2787856 12.1937208,14.2787856 12.5162208,14.1302856 L20.1647208,10.6112856 C20.4894708,10.4620356 20.8637208,10.4627856 21.1877208,10.6142856 L23.4227208,11.6582856 Z M23.4227208,18.1582856 C23.7474708,18.3097856 23.7459708,18.7717856 23.4204708,18.9217856 L12.5162208,23.9392856 C12.1937208,24.0877856 11.8224708,24.0877856 11.4999708,23.9392856 L0.594970771,18.9217856 C0.269470771,18.7717856 0.267970771,18.3097856 0.592720771,18.1582856 L2.82772077,17.1142856 C3.15172077,16.9627856 3.52597077,16.9620356 3.85072077,17.1112856 L11.4999708,20.6302856 C11.8224708,20.7787856 12.1937208,20.7787856 12.5162208,20.6302856 L20.1647208,17.1112856 C20.4894708,16.9620356 20.8637208,16.9627856 21.1877208,17.1142856 L23.4227208,18.1582856 Z"></path></svg></a><a href="https://www.linkedin.com/in/dylanallen/"><svg aria-label="Linkedin" viewBox="0 0 24 24" class="StyledIcon-ofa7kd-0 MRrP"><path fill="#0077B5" fill-rule="evenodd" d="M20.45175,20.45025 L16.89225,20.45025 L16.89225,14.88075 C16.89225,13.5525 16.86975,11.844 15.04275,11.844 C13.191,11.844 12.90825,13.2915 12.90825,14.7855 L12.90825,20.45025 L9.3525,20.45025 L9.3525,8.997 L12.765,8.997 L12.765,10.563 L12.81375,10.563 C13.2885,9.66225 14.4495,8.71275 16.18125,8.71275 C19.78575,8.71275 20.45175,11.08425 20.45175,14.169 L20.45175,20.45025 Z M5.33925,7.4325 C4.1955,7.4325 3.27375,6.50775 3.27375,5.36775 C3.27375,4.2285 4.1955,3.30375 5.33925,3.30375 C6.47775,3.30375 7.4025,4.2285 7.4025,5.36775 C7.4025,6.50775 6.47775,7.4325 5.33925,7.4325 L5.33925,7.4325 Z M7.11975,20.45025 L3.5565,20.45025 L3.5565,8.997 L7.11975,8.997 L7.11975,20.45025 Z M23.00025,0 L1.0005,0 C0.44775,0 0,0.44775 0,0.99975 L0,22.9995 C0,23.55225 0.44775,24 1.0005,24 L23.00025,24 C23.55225,24 24,23.55225 24,22.9995 L24,0.99975 C24,0.44775 23.55225,0 23.00025,0 L23.00025,0 Z"></path></svg></a></nav><div id="authnav"><span><a class="authicon" title="Login"><svg aria-label="Login" viewBox="0 0 24 24" class="StyledIcon-ofa7kd-0 MRrP"><path fill="none" stroke="#000" stroke-width="2" d="M9,15 L9,22 L22,22 L22,2 L9,2 L9,9 M18,12 L0,12 M13,7 L18,12 L13,17"></path></svg> Login</a></span></div></footer></main></div><div class="toastContainer"></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/toast","query":{},"buildId":"l9vYzxnEHpJazF3B8boUl","nextExport":true,"autoExport":true,"isFallback":false}</script><script nomodule="" src="/_next/static/chunks/polyfills-10a8cf8ec0fcff4a7700.js"></script><script src="/_next/static/chunks/webpack-245f049e565ebf942e09.js" async=""></script><script src="/_next/static/chunks/framework.4b81eedf2fcdb09bf521.js" async=""></script><script src="/_next/static/chunks/commons.4d2961221cae5838b6ac.js" async=""></script><script src="/_next/static/chunks/main-55ed807e3b5db3e25777.js" async=""></script><script src="/_next/static/chunks/ff239f9d.249dcdd128198702df19.js" async=""></script><script src="/_next/static/chunks/7c590f24b34f76726c3a37b9c8c63e8f02ff2014.e0b6a729fc787d22f69b.js" async=""></script><script src="/_next/static/chunks/pages/_app-7731033f3eeb159187f9.js" async=""></script><script src="/_next/static/chunks/1f07849e.a376b013561c579bf5b7.js" async=""></script><script src="/_next/static/chunks/6f848d5045b5eb13f5336e9a10231ebd151b0a80.ea2266aaa4deaa456c5b.js" async=""></script><script src="/_next/static/chunks/224ca6d47e35d1bec8c7169f004a821de983723f.a0b9aad4892521f1b797.js" async=""></script><script src="/_next/static/chunks/b6e4c73abf3e02f232daeaa9aa9b92c33df71371.f8acc1975a17fb0ff48e.js" async=""></script><script src="/_next/static/chunks/b957e72bb6404296b47ef351bcffbdbcc35df5f4.15bbaddddde139b952de.js" async=""></script><script src="/_next/static/chunks/pages/blog/toast-3f68802d6043a1ee464a.js" async=""></script><script src="/_next/static/l9vYzxnEHpJazF3B8boUl/_buildManifest.js" async=""></script><script src="/_next/static/l9vYzxnEHpJazF3B8boUl/_ssgManifest.js" async=""></script></body></html>